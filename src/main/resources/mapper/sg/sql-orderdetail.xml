<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bookmarket.app.mapper.sg.OrderDetailMapperSG">
	<insert id="insertBooks" parameterType="map">
		insert all
			into Orders values ((select count(*) from Orders) + 1, #{userId}, sysdate, 'n', 'n','n','n','') 
		<foreach collection="allBookList" item="book" close="select * from dual" separator=" ">
			into OrderDetail values (get_od_seq_nextval(), #{book.bookId}, (select count(*) from Orders) + 1, #{book.bookCnt})
		</foreach>
	</insert>
</mapper>